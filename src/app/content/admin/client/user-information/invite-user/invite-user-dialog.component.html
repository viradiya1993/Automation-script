<h2 mat-dialog-title style="text-align:center">Invite Users</h2>
<mat-dialog-content class="mat-typography">
    <div class="card-body">
        <div class="row">
            <div class="col-md-12 ml-auto mr-auto">
                <form [formGroup]="userForm" novalidate>
                    <div class="row">
                        <div class="col-md-12">
                            <button type="button" (click)="addUser()" class="btn btn-default float-right">+ Add
                                User</button>
                        </div>
                        <div class="col-md-12" formArrayName="items"
                            *ngFor="let item of getControls(); let i = index;">
                            <div class="row" [formGroupName]="i">
                                <div class="col-md-4">
                                    <label class="sr-only" for="email_{{i}}">Email Address</label>
                                    <input type="email" name="email" id="email_{{i}}" formControlName="email"
                                        class="form-control" placeholder="Email Address">
                                    <div *ngIf="submitted && f.controls[i].get('email').errors" class="help-block"
                                        style="color: red">
                                        <div *ngIf="f.controls[i].get('email').errors.required">Email Address is
                                            required</div>
                                        <div *ngIf="f.controls[i].get('email').errors.pattern">Email is not valid</div>
                                        <div *ngIf="f.controls[i].get('email').errors.emailExists">
                                            This email is already taken. Please choose another email.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label class="sr-only" for="first_name_{{i}}">First Name</label>
                                    <input type="text" name="first_name" id="first_name_{{i}}" formControlName="firstName"
                                        class="form-control input-sm" placeholder="First Name">
                                    <div *ngIf="submitted && f.controls[i].get('firstName').errors" class="help-block"
                                        style="color: red">
                                        <div *ngIf="f.controls[i].get('firstName').errors.required">First name is
                                            required</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <label class="sr-only" for="last_name_{{i}}">Last Name</label>
                                    <input type="text" name="last_name" id="last_name_{{i}}" formControlName="lastName"
                                        class="form-control input-sm" placeholder="Last Name">
                                    <div *ngIf="submitted && f.controls[i].get('lastName').errors" class="help-block"
                                        style="color: red">
                                        <div *ngIf="f.controls[i].get('lastName').errors.required">Last name is required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <a class="btn btn-link btn-primary btn-just-icon" (click)="removeUser(i)"
                                        *ngIf="i !== 0" matTooltip="Delete User">
                                        <i class="material-icons" aria-label="Delete User">delete</i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <mat-dialog-actions align="end">
                                <button class="btn btn-default" mat-dialog-close>Cancel</button>
                                <button class="btn btn-primary" cdkFocusInitial (click)="saveUserInfo()">Send</button>
                            </mat-dialog-actions>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</mat-dialog-content>